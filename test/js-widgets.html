<!DOCTYPE html>
<html lang='en'>

<head>
    <title>Widgets Test</title>
    <!-- load js libraries in this order jquery, handlebars, purl, combined, widgets, helpers, individual widgets -->
    <script src="https://code.jquery.com/jquery-2.1.0.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js" type="text/javascript"></script>
    <script src="../lib/purl.js" type="text/javascript"></script>
    <script src="../lib/ops-js-combined.js" type="text/javascript"></script>
    <script src="../src/widgets.js" type="text/javascript"></script>
    <script src="../src/helpers.js" type="text/javascript"></script>
    <script src="../src/compound-widgets.js" type="text/javascript"></script>
    <script src="../src/target-widgets.js" type="text/javascript"></script>
    <link type="text/css" rel="stylesheet" href="http://www.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css"></link>
    <link type="text/css" rel="stylesheet" href="../css/ops-styles.css"></link>
</head>

<body>
    <div id="compound-info-div" style="display: none;">
        <div class="row">
            <div class="container">
                <div class="container-fluid large-top-spacing">
                    <div class="row-fluid">
                        <!--Sidebar content-->
                        <div class="span3">
                            <div style="padding:0 0 0 20px;background:white;">{{cs_image_src csURI}}</div>
                            <!--box properties-->
                            <div id="boxes" class="small-top-spacing">
                                {{#if logp}}
                                <div class="summary-box">
                                    <div class="inner-property-content">
                                        <p><small>AlogP</small>
                                        </p>
                                        <p class="lead">{{logp}}</p>
                                    </div>
                                </div>
                                {{/if}} {{#if hba}}
                                <div class="summary-box">
                                    <div class="inner-property-content">
                                        <p><small># H-Bond Acceptors</small>
                                        </p>
                                        <p class="lead">{{hba}}</p>
                                    </div>
                                </div>
                                {{/if}} {{#if hbd}}
                                <div class="summary-box">
                                    <div class="inner-property-content">
                                        <p><small># H-Bond Donors</small>
                                        </p>
                                        <p class="lead">{{hbd}}</p>
                                    </div>
                                </div>
                                {{/if}} {{#if fullMWT}}
                                <div class="summary-box">
                                    <div class="inner-property-content">
                                        <p><small>Mol Weight</small>
                                        </p>
                                        <p class="lead">{{fullMWT}}</p>
                                    </div>
                                </div>
                                {{/if}} {{#if mwFreebase}}
                                <div class="summary-box">
                                    <div class="inner-property-content">
                                        <p><small>Mol Weight Freebase</small>
                                        </p>
                                        <p class="lead">{{mwFreebase}}</p>
                                    </div>
                                </div>
                                {{/if}} {{#if psa}}
                                <div class="summary-box">
                                    <div class="inner-property-content">
                                        <p><small>Polar Surface Area</small>
                                        </p>
                                        <p class="lead">{{psa}}</p>
                                    </div>
                                </div>
                                {{/if}} {{#if rtb}}
                                <div class="summary-box">
                                    <div class="inner-property-content">
                                        <p><small># Rotatable Bonds</small>
                                        </p>
                                        <p class="lead">{{rtb}}</p>
                                    </div>
                                </div>
                                {{/if}}

                            </div>
                        </div>

                        <!--Body content-->
                        <div class="span9">
                            <!--title and formula-->
                            <div>
                                <div style="padding:20px 0 0 0">
                                    <h1>{{prefLabel}}</h1>
                                </div>
                                <div class="lead pull-right">
                                    <p class="pull-left">{{formatMolecularFormula molform}}</p>
                                </div>
                            </div>

                            <!--description-->
                            <div class="summary-descriptive-text large-top-spacing">
                                {{#if description}}
                                <p>{{description}}</p>
                                {{/if}}
                            </div>

                            <!--biotransformation-->
                            <div class="summary-descriptive-text small-top-spacing">
                                {{#if biotransformation}}
                                <p>{{biotransformationItem}}</p>
                                {{/if}}
                            </div>

                            <!--details-->
                            <div class="dl-horizontal" style="font-size:13px;">
                                <dl>
                                    <!--Chemspider ID-->
                                    {{#if csURI}}
                                    <dt class="medium-padding-top">ChemSpider ID</dt>
                                    <dd class="medium-padding-top">{{linkableChemspiderID csURI}}</dd>
                                    {{/if}}

                                    <!--SMILES-->
                                    {{#if smiles}}
                                    <dt class="medium-padding-top">SMILES</dt>
                                    <dd class="medium-padding-top">{{smiles}}</dd>
                                    {{/if}}

                                    <!--InCHL-->
                                    {{#if inchi}}
                                    <dt class="medium-padding-top">Standard  InChI</dt>
                                    <dd class="medium-padding-top">{{inchi}}</dd>
                                    {{/if}}

                                    <!--InCHLKey-->
                                    {{#if inchiKey}}
                                    <dt class="medium-padding-top">Standard InChIKey</dt>
                                    <dd class="medium-padding-top">{{inchiKey}}</dd>
                                    {{/if}}

                                    <!--Protein Binding-->
                                    {{#if proteinBinding}}
                                    <dt class="medium-padding-top">Protein Binding</dt>
                                    <dd class="medium-padding-top">{{proteinBinding}}</dd>
                                    {{/if}}

                                    <!--Toxicity-->
                                    {{#if toxicity}}
                                    <dt class="medium-padding-top">Toxicity</dt>
                                    <dd class="medium-padding-top">{{toxicity}}</dd>
                                    {{/if}}
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="target-info-div" style="display: none;">
        <div class="row">
            <div class="container">
                <div class="container-fluid large-top-spacing">
                    <div class="row-fluid">
  			            <!--Sidebar content-->
    		            <div class="span3">
      			            <div style="padding:0 0 0 20px;" >{{target_image_src seeAlso}}</div>	
              			    <!--box properties-->
      			            <div id="boxes" class="small-top-spacing">		
					            {{#if molecularWeight}}
      				            <div class="summary-box">
      					            <div class="inner-property-content">
  							            <p><small>Molecular Weight</small></p>
  							            <p class="lead">{{molecularWeight}}</p>
  						            </div>
      				            </div>
      				            {{/if}}
					            {{#if numberOfResidues}}
      				            <div class="summary-box">
      					            <div class="inner-property-content">
  							            <p><small># of Residues</small></p>
  							            <p class="lead">{{numberOfResidues}}</p>
  						            </div>
      				            </div>
					            {{/if}}
					            {{#if theoreticalPi}}
      				            <div class="summary-box">
      					            <div class="inner-property-content">
  							            <p><small>Theoretical Pi</small></p>
  							            <p class="lead">{{theoreticalPi}}</p>
  						            </div>
      				            </div>
					            {{/if}}
      			            </div>
    		            </div>	
    		            <!--Body content-->
    		            <div class="span9" style="padding:30px 0 0 0;">
                            <!--title and formula-->
                            <div>
                                <div style="padding:20px 0 0 0">
                                    {{#if prefLabel}}
                                    <h1>{{prefLabel}}</h1>
                                    {{/if}}
                                </div>
                            </div>
                            {{#if alternativeName}}
                            <div class="summary-descriptive-text large-top-spacing">
                                <em>{{alternativeName}}</em>
                            </div>
                            {{/if}}
				            <!--biotransformation-->
					        <!--details-->
                            <div class="dl-horizontal" style="font-size:13px;">
                                <dl>
                                    {{#if organism}}
                                    <dt>Organism</dt>
                                    <dd>{{linkableOrganism organism}}</dd> 
                                    {{/if}}
                                    {{#if existence}}
                                    <dt>Existence</dt>
                                    <dd>{{linkableOrganism existence}}</dd> 
                                    {{/if}}
                                    {{#if functionAnnotation}}
                                    <dt>Specific Function</dt>
                                    <dd>{{functionAnnotation}}</dd> 
                                    {{/if}}
                                    {{#if cellularLocation}} 
                                    <dt>Cellular Location</dt>
                                    <dd>{{cellularLocation}}</dd>                                                        
                                    {{/if}}
                                    {{#if keywords}}
                                    <dt>Keywords</dt>
                                    <dd>{{keywords}}</dd>                                                        
                                    {{/if}}
                                    {{#if seeAlso}}
                                    <dt>PDB</dt>
                                    <dd>{{#each seeAlso}} {{pdbLink this}} {{/each}}</dd> 
                                    {{/if}}        
                                    {{#if sequence}}
                                    <dt>Sequence</dt>
                                    <dd><div style="max-width:500px;word-wrap:break-word;">{{sequence}}</div></dd>
                                    {{/if}}        
                                </dl>
                            </div>
                        </div>
  		            </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
      // Get api params from the url then create the widget
      var appID = $.url().param('app_id');
      var appKey = $.url().param('app_key');
      var appUrl = $.url().param('app_url');
      var compoundWidget = new Openphacts.CompoundWidget(appUrl, appID, appKey);
      compoundWidget.infoByURI("http://www.conceptwiki.org/concept/dd758846-1dac-4f0d-a329-06af9a7fa413", "compound-info-div");
      var targetWidget = new Openphacts.TargetWidget(appUrl, appID, appKey);
      targetWidget.infoByURI("http://www.conceptwiki.org/concept/5de0f011-68e0-4917-bac2-6d65e8f7effb", "target-info-div");
    </script>
</body>

</html>
